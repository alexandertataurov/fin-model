---
title: 'Z-Index'
description: 'Comprehensive z-index system for managing element stacking order'
parameters:
  docs:
    description:
      component: 'Our z-index system provides consistent, semantic layering that ensures proper element stacking order and prevents conflicts across all components and layouts.'
    canvas:
      sourceState: 'hidden'
---

import { Meta, Story, Canvas, ArgsTable } from '@storybook/blocks';
import { tokens } from '../../tokens';

<Meta
  title="Design System/Foundations/Z-Index"
  parameters={{
    viewMode: 'docs',
    previewTabs: {
      canvas: { hidden: true },
    },
  }}
/>

# Z-Index

Our z-index system provides consistent, semantic layering that ensures proper element stacking order and prevents conflicts across all components and layouts.

## Overview

The z-index system is built on semantic naming conventions and clear layering hierarchy. Each z-index value serves a specific purpose in the interface, from base content to prominent overlays.

## Token Definitions

### Semantic Tokens

```typescript
tokens.zIndex = {
  // Base layers (0-50)
  0: '0', // Base content
  10: '10', // Slightly elevated
  20: '20', // Medium elevation
  30: '30', // High elevation
  40: '40', // Very high elevation
  50: '50', // Maximum base elevation

  // Semantic layers (1000+)
  dropdown: '1000', // Navigation menus, dropdowns
  sticky: '1020', // Fixed headers, sticky elements
  fixed: '1030', // Fixed elements, sidebars
  modal: '1040', // Modal overlays, dialogs
  popover: '1050', // Context menus, tooltips
  tooltip: '1060', // Help text, notifications
};
```

### Usage Guidelines

```typescript
// Common z-index patterns
const zIndexPatterns = {
  // Navigation
  navigation: tokens.zIndex.dropdown,
  submenu: tokens.zIndex.dropdown + 10,

  // Overlays
  backdrop: tokens.zIndex.modal - 10,
  modal: tokens.zIndex.modal,
  modalContent: tokens.zIndex.modal + 10,

  // Interactive elements
  tooltip: tokens.zIndex.tooltip,
  popover: tokens.zIndex.popover,
  dropdown: tokens.zIndex.dropdown,

  // Fixed elements
  header: tokens.zIndex.sticky,
  sidebar: tokens.zIndex.fixed,
  floating: tokens.zIndex.fixed + 10,
};
```

## Usage Rules

### 1. **Semantic Layer Usage**

- **dropdown (1000)**: Navigation menus, dropdown lists
- **sticky (1020)**: Fixed headers, sticky navigation
- **fixed (1030)**: Fixed elements, sidebars
- **modal (1040)**: Modal overlays, dialogs
- **popover (1050)**: Context menus, tooltips
- **tooltip (1060)**: Help text, notifications

### 2. **Numeric Scale Usage**

- **0-50**: Base content, background elements
- **100-500**: Component-level layering
- **1000+**: Semantic UI layers

### 3. **Stacking Context Guidelines**

- Create new stacking contexts sparingly
- Use `position: relative` to create stacking contexts
- Avoid deeply nested z-index values

### 4. **Responsive Considerations**

- Z-index values should work across all breakpoints
- Consider mobile-specific layering needs
- Test stacking order on different devices

## Best Practices

### 1. **Semantic Naming**

```tsx
// ✅ Good - Semantic z-index usage
<div style={{ zIndex: tokens.zIndex.modal }}>
  Modal content
</div>

// ❌ Bad - Arbitrary z-index values
<div style={{ zIndex: 9999 }}>
  Modal content
</div>
```

### 2. **Consistent Layering**

```tsx
// ✅ Good - Consistent z-index hierarchy
const Modal = ({ isOpen, children }) => (
  <>
    {isOpen && <div style={{ zIndex: tokens.zIndex.modal - 10 }}>Backdrop</div>}
    {isOpen && <div style={{ zIndex: tokens.zIndex.modal }}>{children}</div>}
  </>
);

// ❌ Bad - Inconsistent z-index values
const Modal = ({ isOpen, children }) => (
  <>
    {isOpen && <div style={{ zIndex: 1000 }}>Backdrop</div>}
    {isOpen && <div style={{ zIndex: 9999 }}>{children}</div>}
  </>
);
```

### 3. **Stacking Context Management**

```tsx
// ✅ Good - Proper stacking context
<div style={{ position: 'relative' }}>
  <button>Trigger</button>
  {isOpen && (
    <div
      style={{
        position: 'absolute',
        zIndex: tokens.zIndex.dropdown,
        top: '100%',
        left: 0,
      }}
    >
      {children}
    </div>
  )}
</div>

// ❌ Bad - Missing stacking context
<div>
  <button>Trigger</button>
  {isOpen && (
    <div
      style={{
        position: 'absolute',
        zIndex: tokens.zIndex.dropdown,
        top: '100%',
        left: 0,
      }}
    >
      {children}
    </div>
  )}
</div>
```

### 4. **Accessibility Compliance**

```tsx
// ✅ Good - Accessible focus management
const Modal = ({ isOpen, onClose, children }) => (
  <>
    {isOpen && (
      <div
        style={{ zIndex: tokens.zIndex.modal - 10 }}
        onClick={onClose}
        role="presentation"
        aria-hidden="true"
      />
    )}
    {isOpen && (
      <div
        style={{ zIndex: tokens.zIndex.modal }}
        role="dialog"
        aria-modal="true"
        tabIndex={-1}
      >
        {children}
      </div>
    )}
  </>
);
```

## How-To Guides

### Creating a Z-Index Utility System

```tsx
import { tokens } from '@/design-system/tokens';

const zIndex = {
  // Base utilities
  base: { zIndex: tokens.zIndex[0] },
  elevated: { zIndex: tokens.zIndex[10] },
  higher: { zIndex: tokens.zIndex[30] },
  highest: { zIndex: tokens.zIndex[50] },

  // Semantic utilities
  dropdown: { zIndex: tokens.zIndex.dropdown },
  sticky: { zIndex: tokens.zIndex.sticky },
  fixed: { zIndex: tokens.zIndex.fixed },
  modal: { zIndex: tokens.zIndex.modal },
  popover: { zIndex: tokens.zIndex.popover },
  tooltip: { zIndex: tokens.zIndex.tooltip },

  // Relative utilities
  above: (base: number) => ({ zIndex: base + 10 }),
  below: (base: number) => ({ zIndex: base - 10 }),

  // Component-specific
  backdrop: { zIndex: tokens.zIndex.modal - 10 },
  modalContent: { zIndex: tokens.zIndex.modal + 10 },
  submenu: { zIndex: tokens.zIndex.dropdown + 10 },
};

// Usage example
const Dropdown = ({
  isOpen,
  children,
}: {
  isOpen: boolean;
  children: React.ReactNode;
}) => (
  <div style={{ position: 'relative' }}>
    {isOpen && (
      <div
        style={{
          position: 'absolute',
          top: '100%',
          left: 0,
          ...zIndex.dropdown,
          backgroundColor: 'white',
          border: '1px solid #e5e5e5',
          borderRadius: '8px',
          boxShadow: tokens.shadows.md,
        }}
      >
        {children}
      </div>
    )}
  </div>
);
```

### Creating a Modal System

```tsx
interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title: string;
  children: React.ReactNode;
}

const Modal = ({ isOpen, onClose, title, children }: ModalProps) => {
  if (!isOpen) return null;

  return (
    <>
      {/* Backdrop */}
      <div
        style={{
          position: 'fixed',
          top: 0,
          left: 0,
          right: 0,
          bottom: 0,
          backgroundColor: 'rgba(0, 0, 0, 0.5)',
          zIndex: tokens.zIndex.modal - 10,
        }}
        onClick={onClose}
        role="presentation"
        aria-hidden="true"
      />

      {/* Modal */}
      <div
        style={{
          position: 'fixed',
          top: '50%',
          left: '50%',
          transform: 'translate(-50%, -50%)',
          backgroundColor: 'white',
          borderRadius: '12px',
          padding: tokens.spacing[6],
          maxWidth: '500px',
          width: '90%',
          maxHeight: '80vh',
          overflow: 'auto',
          zIndex: tokens.zIndex.modal,
          boxShadow: tokens.shadows.modal,
        }}
        role="dialog"
        aria-modal="true"
        aria-labelledby="modal-title"
        tabIndex={-1}
      >
        <div
          style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            marginBottom: tokens.spacing[4],
          }}
        >
          <h2
            id="modal-title"
            style={{
              fontSize: tokens.typography.fontSize.xl,
              fontWeight: tokens.typography.fontWeight.semibold,
              margin: 0,
            }}
          >
            {title}
          </h2>
          <button
            onClick={onClose}
            style={{
              background: 'none',
              border: 'none',
              fontSize: '24px',
              cursor: 'pointer',
              padding: tokens.spacing[2],
              borderRadius: '4px',
            }}
            aria-label="Close modal"
          >
            ×
          </button>
        </div>
        {children}
      </div>
    </>
  );
};
```

### Creating a Tooltip System

```tsx
interface TooltipProps {
  content: string;
  children: React.ReactNode;
  position?: 'top' | 'bottom' | 'left' | 'right';
}

const Tooltip = ({ content, children, position = 'top' }: TooltipProps) => {
  const [isVisible, setIsVisible] = useState(false);
  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });

  const handleMouseEnter = (e: React.MouseEvent) => {
    const rect = e.currentTarget.getBoundingClientRect();
    const tooltipWidth = 200; // Approximate tooltip width
    const tooltipHeight = 40; // Approximate tooltip height

    const getPosition = () => {
      switch (position) {
        case 'top':
          return {
            x: rect.left + rect.width / 2 - tooltipWidth / 2,
            y: rect.top - tooltipHeight - 8,
          };
        case 'bottom':
          return {
            x: rect.left + rect.width / 2 - tooltipWidth / 2,
            y: rect.bottom + 8,
          };
        case 'left':
          return {
            x: rect.left - tooltipWidth - 8,
            y: rect.top + rect.height / 2 - tooltipHeight / 2,
          };
        case 'right':
          return {
            x: rect.right + 8,
            y: rect.top + rect.height / 2 - tooltipHeight / 2,
          };
      }
    };

    setTooltipPosition(getPosition());
    setIsVisible(true);
  };

  return (
    <div style={{ position: 'relative', display: 'inline-block' }}>
      <div
        onMouseEnter={handleMouseEnter}
        onMouseLeave={() => setIsVisible(false)}
      >
        {children}
      </div>
      {isVisible && (
        <div
          style={{
            position: 'fixed',
            left: tooltipPosition.x,
            top: tooltipPosition.y,
            backgroundColor: tokens.colors.secondary[800],
            color: tokens.colors.white,
            padding: `${tokens.spacing[2]} ${tokens.spacing[3]}`,
            borderRadius: '6px',
            fontSize: tokens.typography.fontSize.sm,
            zIndex: tokens.zIndex.tooltip,
            pointerEvents: 'none',
            whiteSpace: 'nowrap',
          }}
          role="tooltip"
        >
          {content}
        </div>
      )}
    </div>
  );
};
```

## Common Patterns

### Sticky Header

```tsx
const StickyHeader = ({ children }: { children: React.ReactNode }) => (
  <header
    style={{
      position: 'sticky',
      top: 0,
      backgroundColor: 'white',
      borderBottom: `1px solid ${tokens.colors.secondary[200]}`,
      padding: tokens.spacing[4],
      zIndex: tokens.zIndex.sticky,
      boxShadow: tokens.shadows.sm,
    }}
  >
    {children}
  </header>
);
```

### Floating Action Button

```tsx
const FloatingActionButton = ({
  icon,
  onClick,
}: {
  icon: string;
  onClick: () => void;
}) => (
  <button
    onClick={onClick}
    style={{
      position: 'fixed',
      bottom: tokens.spacing[6],
      right: tokens.spacing[6],
      width: '56px',
      height: '56px',
      borderRadius: '50%',
      backgroundColor: tokens.colors.primary[500],
      color: tokens.colors.white,
      border: 'none',
      boxShadow: tokens.shadows.lg,
      cursor: 'pointer',
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      fontSize: '24px',
      zIndex: tokens.zIndex.fixed,
    }}
  >
    {icon}
  </button>
);
```

### Dropdown Menu

```tsx
const DropdownMenu = ({
  trigger,
  items,
  isOpen,
  onToggle,
}: {
  trigger: React.ReactNode;
  items: Array<{ label: string; onClick: () => void }>;
  isOpen: boolean;
  onToggle: () => void;
}) => (
  <div style={{ position: 'relative' }}>
    <div onClick={onToggle}>{trigger}</div>

    {isOpen && (
      <div
        style={{
          position: 'absolute',
          top: '100%',
          left: 0,
          right: 0,
          backgroundColor: 'white',
          borderRadius: '8px',
          border: `1px solid ${tokens.colors.secondary[200]}`,
          boxShadow: tokens.shadows.dropdown,
          zIndex: tokens.zIndex.dropdown,
          marginTop: tokens.spacing[1],
        }}
      >
        {items.map((item, index) => (
          <button
            key={index}
            onClick={item.onClick}
            style={{
              width: '100%',
              padding: tokens.spacing[3],
              border: 'none',
              background: 'transparent',
              textAlign: 'left',
              cursor: 'pointer',
              fontSize: tokens.typography.fontSize.base,
              color: tokens.colors.secondary[700],
            }}
          >
            {item.label}
          </button>
        ))}
      </div>
    )}
  </div>
);
```

## Accessibility Guidelines

### 1. **Focus Management**

- Ensure focus is trapped within modals
- Return focus to trigger element when modal closes
- Use proper ARIA attributes for screen readers

### 2. **Screen Reader Support**

- Use semantic HTML elements
- Provide proper ARIA labels and descriptions
- Test with screen readers

### 3. **Keyboard Navigation**

- Ensure all interactive elements are keyboard accessible
- Test tab order with z-index layering
- Provide keyboard shortcuts where appropriate

### 4. **Touch Interactions**

- Ensure touch targets are appropriately sized
- Test z-index behavior on touch devices
- Consider mobile-specific layering needs

## Testing Checklist

- [ ] Z-index values create proper layering hierarchy
- [ ] Stacking contexts are managed correctly
- [ ] Focus management works with z-index layering
- [ ] Screen readers can access all content layers
- [ ] Touch interactions work on mobile devices
- [ ] Z-index values are consistent across components

## Resources

- [CSS Z-Index](https://developer.mozilla.org/en-US/docs/Web/CSS/z-index)
- [Stacking Context](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context)
- [Accessible Modal Dialogs](https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal/)
- [Focus Management](https://www.w3.org/WAI/WCAG21/Understanding/focus-order.html)
