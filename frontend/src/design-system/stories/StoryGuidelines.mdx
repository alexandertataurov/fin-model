import { Meta } from '@storybook/blocks';

<Meta title="Design System/Story Guidelines" />

# Story Guidelines

This document outlines the standards for creating consistent, well-documented stories across the FinVision Design System.

## File Naming Convention

- **Component Stories**: `ComponentName.stories.tsx`
- **Documentation**: `ComponentName.Guidelines.mdx` or `ComponentName.Examples.mdx`
- **Test Stories**: `ComponentName.test.stories.tsx` (for testing specific scenarios)

## Story Structure

Every story file should follow this structure:

```tsx
import type { Meta, StoryObj } from '@storybook/react';
import { ComponentName } from '../components/ComponentName';

const meta: Meta<typeof ComponentName> = {
  title: 'Design System/ComponentName',
  component: ComponentName,
  parameters: {
    layout: 'centered',
    docs: {
      description: {
        component: 'Detailed component description',
      },
    },
  },
  argTypes: {
    // All props with proper controls and descriptions
  },
  tags: ['autodocs'],
};

export default meta;
type Story = StoryObj<typeof meta>;

// Stories follow this order:
export const Default: Story = { /* Primary use case */ };
export const Secondary: Story = { /* Alternative state */ };
export const Interactive: Story = { /* With play function */ };
export const States: Story = { /* Multiple states */ };
export const UsageExamples: Story = { /* Real-world examples */ };
```

## Required Story Types

### 1. Default Story
- Shows the most common use case
- Uses sensible default props
- Serves as the primary example

### 2. Variant Stories
- One story per variant (if applicable)
- Clear naming: `Primary`, `Secondary`, `Destructive`, etc.

### 3. States Story
- Shows different states in one view
- Includes: normal, hover, active, disabled, loading
- Uses render function with multiple instances

### 4. Interactive Story
- Demonstrates user interactions
- Includes play function for testing
- Shows click handlers, form submissions, etc.

### 5. Usage Examples
- Real-world usage patterns
- Multiple examples in one story
- Shows different configurations

## Documentation Standards

### Component Description
- Clear, concise description of purpose
- Key features and capabilities
- When to use this component

### Prop Documentation
- Every prop must have a description
- Include type information
- Specify default values
- Add usage examples for complex props

### Accessibility Notes
- Screen reader compatibility
- Keyboard navigation support
- ARIA attributes used
- Color contrast considerations

### Design Tokens
- List design tokens used
- Explain responsive behavior
- Note theme compatibility

## ArgTypes Best Practices

```tsx
argTypes: {
  variant: {
    control: { type: 'select' },
    options: ['primary', 'secondary', 'destructive'],
    description: 'The visual style variant',
  },
  size: {
    control: { type: 'select' },
    options: ['sm', 'md', 'lg'],
    description: 'The size of the component',
  },
  disabled: {
    control: { type: 'boolean' },
    description: 'Whether the component is disabled',
  },
  children: {
    control: { type: 'text' },
    description: 'The content to display',
  },
}
```

## Testing Integration

### Play Functions
- Test user interactions
- Verify state changes
- Check accessibility
- Validate form submissions

### Interaction Testing
```tsx
export const Interactive: Story = {
  args: { /* props */ },
  play: async ({ canvasElement }) => {
    const canvas = within(canvasElement);
    const button = canvas.getByRole('button');
    await userEvent.click(button);
    // Add assertions here
  },
};
```

## MDX Documentation

Use MDX files for:
- Component guidelines and best practices
- Design system documentation
- Usage examples and patterns
- Accessibility guidelines

### MDX Structure
```mdx
import { Meta, Story, Canvas, ArgsTable } from '@storybook/blocks';
import * as ComponentStories from './ComponentName.stories';

<Meta of={ComponentStories} />

# ComponentName

Component description and usage guidelines.

## Usage

<Canvas of={ComponentStories.Default} />

## Props

<ArgsTable of={ComponentStories} />

## Examples

<Story of={ComponentStories.UsageExamples} />
```

## Quality Checklist

- [ ] All props documented with argTypes
- [ ] Component description is clear and complete
- [ ] Stories cover all variants and states
- [ ] Interactive stories include play functions
- [ ] Accessibility considerations documented
- [ ] Design tokens and theming explained
- [ ] Usage examples provided
- [ ] File follows naming convention
- [ ] No hardcoded content (use controls)
- [ ] Responsive behavior demonstrated

## Common Patterns

### Form Components
- Show validation states
- Include error handling
- Demonstrate form submission

### Layout Components
- Show different content lengths
- Demonstrate responsive behavior
- Include spacing examples

### Interactive Components
- Show loading states
- Include success/error states
- Demonstrate user feedback

### Data Components
- Show empty states
- Include loading states
- Demonstrate data variations

## Performance Considerations

- Use `useMemo` for expensive computations in stories
- Avoid unnecessary re-renders
- Keep story data minimal but realistic
- Use proper loading states

## Accessibility Testing

- Run accessibility addon on all stories
- Test with screen readers
- Verify keyboard navigation
- Check color contrast
- Validate ARIA attributes
